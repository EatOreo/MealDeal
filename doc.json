{
    "name": "get_offers",
    "description": "Fetch a paginated list of Offers, filtered by the provided search criteria.",
    "input": {
      "type": "object",
      "properties": {
        "page": {
          "type": "object",
          "properties": {
            "after_cursor": {
              "type": "string"
            },
            "page_size": {
              "type": "integer",
              "minimum": 1,
              "maximum": 24,
              "default": 24
            }
          },
          "additionalProperties": false,
          "description": "The input you use to define the start of a paginated request, and the max number of items in the result.",
          "default": {
            "page_size": 24
          }
        },
        "where": {
          "type": "object",
          "properties": {
            "term": {
              "type": "string",
              "maxLength": 40,
              "description": "The query string to search for."
            },
            "max_radius": {
              "type": "integer",
              "minimum": 1,
              "description": "The distance around the geohash, in meters, to search."
            },
            "business_ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "description": "The Ids of the Businesses to limit the search to."
            },
            "business_category_ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "description": "The Ids of the BusinessCategories to limit the search to."
            },
            "local_business_ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "description": "The Ids of the LocalBusinesses to limit the search to."
            },
            "publication_ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "description": "The Ids of the Publications that contain the resulting offers."
            },
            "product_brand_slugs": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "description": "List of product brand slugs."
            },
            "include_upcoming": {
              "type": "boolean",
              "description": "If true, offers with a validity date in the future will be included in the results."
            },
            "price_range": {
              "type": "object",
              "properties": {
                "min": {
                  "type": "number",
                  "minimum": 0
                },
                "max": {
                  "type": "number",
                  "minimum": 0
                },
                "per_unit": {
                  "type": "string",
                  "enum": [
                    "gram",
                    "hectogram",
                    "kilogram",
                    "milligram",
                    "milliliter",
                    "centiliter",
                    "deciliter",
                    "liter",
                    "piece",
                    "microgram",
                    "centigram",
                    "decigram",
                    "tonne",
                    "ounce",
                    "pound",
                    "stone",
                    "us_ton",
                    "imperial_ton",
                    "kiloliter",
                    "cubic_meter",
                    "megaliter",
                    "us_teaspoon",
                    "us_tablespoon",
                    "us_fluid_ounce",
                    "us_cup",
                    "us_pint",
                    "us_quart",
                    "us_gallon",
                    "imperial_fluid_ounce",
                    "imperial_teaspoon",
                    "imperial_tablespoon",
                    "imperial_pint",
                    "imperial_quart",
                    "imperial_gallon",
                    "cubic_inch",
                    "cubic_foot"
                  ]
                }
              },
              "additionalProperties": false,
              "description": "Limit the offers by their price and/or their unit measurement. If no per_unit is provided, find offers with a price (inclusively) between the min and/or max values. If per_unit is provided, only offers measured in that category of unit (volume or mass) are returned. If price_per and a min and/or max are given, we find offers whose \"price per normalized unit\" is within the specified \"max price per unit\" and \"min price per unit\" range."
            }
          },
          "additionalProperties": false
        },
        "ordered_by": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "score_desc",
              "popularity_desc",
              "unit_price_asc",
              "total_price_asc"
            ]
          },
          "minItems": 1
        },
        "geohash": {
          "type": "string",
          "pattern": "^[a-z0-9A-Z]{1,12}$",
          "description": "A geohash string, with an accuracy between 5000km (1char) & 4cm (12char)"
        }
      },
      "additionalProperties": false
    },
    "output": {
      "type": "object",
      "properties": {
        "page_info": {
          "type": "object",
          "properties": {
            "last_cursor": {
              "type": "string",
              "description": "Use this as the after_cursor parameter when requesting the next page. Will be null if results was empty."
            },
            "has_next_page": {
              "type": "boolean",
              "description": "If true, there is another page of paginated results to fetch."
            }
          },
          "required": [
            "has_next_page"
          ],
          "additionalProperties": false,
          "description": "Information included with every paginated response."
        },
        "offers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "__typename": {
                "type": "string",
                "enum": [
                  "offer"
                ]
              },
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "images": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "width": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "height": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "url": {
                      "type": "string",
                      "format": "uri"
                    }
                  },
                  "required": [
                    "width",
                    "url"
                  ],
                  "additionalProperties": false
                },
                "minItems": 1
              },
              "webshop_link": {
                "type": "string"
              },
              "price": {
                "type": "number",
                "minimum": 0
              },
              "currency_code": {
                "type": "string",
                "enum": [
                  "DKK",
                  "EUR",
                  "NOK",
                  "PLN",
                  "SEK",
                  "ISK",
                  "RON"
                ]
              },
              "savings": {
                "type": "number",
                "minimum": 0
              },
              "piece_count": {
                "type": "object",
                "properties": {
                  "from": {
                    "type": "number",
                    "minimum": 0
                  },
                  "to": {
                    "type": "number",
                    "minimum": 0
                  }
                },
                "required": [
                  "from",
                  "to"
                ],
                "additionalProperties": false,
                "description": "How many pieces of the offer there are (eg. 2-3x)."
              },
              "unit_symbol": {
                "type": "string",
                "enum": [
                  "gram",
                  "hectogram",
                  "kilogram",
                  "milligram",
                  "milliliter",
                  "centiliter",
                  "deciliter",
                  "liter",
                  "piece",
                  "microgram",
                  "centigram",
                  "decigram",
                  "tonne",
                  "ounce",
                  "pound",
                  "stone",
                  "us_ton",
                  "imperial_ton",
                  "kiloliter",
                  "cubic_meter",
                  "megaliter",
                  "us_teaspoon",
                  "us_tablespoon",
                  "us_fluid_ounce",
                  "us_cup",
                  "us_pint",
                  "us_quart",
                  "us_gallon",
                  "imperial_fluid_ounce",
                  "imperial_teaspoon",
                  "imperial_tablespoon",
                  "imperial_pint",
                  "imperial_quart",
                  "imperial_gallon",
                  "cubic_inch",
                  "cubic_foot"
                ],
                "description": "What unit the unit_size is measured in (eg. kg)."
              },
              "unit_size": {
                "type": "object",
                "properties": {
                  "from": {
                    "type": "number",
                    "minimum": 0
                  },
                  "to": {
                    "type": "number",
                    "minimum": 0
                  }
                },
                "required": [
                  "from",
                  "to"
                ],
                "additionalProperties": false,
                "description": "How much of the thing there is per piece (eg. 250-500g)."
              },
              "validity": {
                "type": "object",
                "properties": {
                  "from": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "date-time"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "to": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "date-time"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "required": [
                  "from",
                  "to"
                ],
                "additionalProperties": false,
                "description": "The date range that the offer is valid within."
              },
              "visible_from": {
                "type": "string",
                "format": "date-time",
                "description": "The date at which the offer becomes visible to the public."
              },
              "business": {
                "type": "object",
                "properties": {
                  "__typename": {
                    "type": "string",
                    "enum": [
                      "business"
                    ]
                  },
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "primary_color": {
                    "type": "string",
                    "pattern": "^#[A-Fa-f0-9]{6}$",
                    "description": "A 6-digit hex color, starting with #."
                  },
                  "positive_logotypes": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "width": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "height": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        }
                      },
                      "required": [
                        "width",
                        "url"
                      ],
                      "additionalProperties": false
                    },
                    "description": "The business' logotype image (in various sizes). Suitable for placing on a white background."
                  },
                  "negative_logotypes": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "width": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "height": {
                          "type": "integer",
                          "minimum": 1
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        }
                      },
                      "required": [
                        "width",
                        "url"
                      ],
                      "additionalProperties": false
                    },
                    "description": "The business' logotype image (in various sizes). Suitable for placing on the primary_color."
                  },
                  "country_code": {
                    "type": "string"
                  },
                  "short_description": {
                    "type": "string",
                    "description": "A short plaintext description of the business"
                  },
                  "markdown_description": {
                    "type": "string",
                    "description": "A long description of the business enhanced with markdown markup"
                  },
                  "website_link": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "uri"
                      },
                      {
                        "type": "string",
                        "const": ""
                      }
                    ]
                  },
                  "markets": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "slug": {
                          "type": "string"
                        },
                        "country_code": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "slug",
                        "country_code"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "__typename",
                  "id",
                  "name",
                  "primary_color",
                  "positive_logotypes",
                  "negative_logotypes",
                  "country_code",
                  "markets"
                ],
                "additionalProperties": false,
                "description": "All the properties related to a Business object."
              }
            },
            "required": [
              "__typename",
              "id",
              "name",
              "images",
              "price",
              "currency_code",
              "piece_count",
              "unit_symbol",
              "unit_size",
              "validity",
              "visible_from",
              "business"
            ],
            "additionalProperties": false,
            "description": "All the properties related to an Offer object."
          }
        }
      },
      "required": [
        "page_info",
        "offers"
      ],
      "additionalProperties": false
    }
  }